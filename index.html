<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>League 7 Overlay</title>
  <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: transparent;
      overflow: hidden;
      font-family: 'IM Fell English SC', serif;
      width: 100%;
      height: 100%;
    }

    #overlay {
      position: relative;
      width: 1920px;
      height: 1080px;
      box-sizing: border-box;
      border: 15px solid;
      z-index: 1;
    }

    #background {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 0;
    }

    .team {
      position: absolute;
      font-weight: bold;
      font-size: 48px;
      color: white;
      text-shadow: 2px 2px 4px #000;
      z-index: 3;
      transform: translateX(-50%);
      white-space: nowrap;
    }

    .score {
      position: absolute;
      font-weight: bold;
      font-size: 56px;
      color: black;
      text-shadow: 2px 2px 4px #000;
      z-index: 3;
      width: 120px;
      text-align: center;
    }

    #teamA {
      top: 35px;
      left: 470px;
    }
    #teamB {
      top: 35px;
      left: 1440px;
      transform: translateX(-50%);
    }

    #scoreA {
      top: 82px;
      left: 555px;
    }

    #scoreB {
      top: 82px;
      left: 1276px;
    }

    #controlPanel {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      padding: 15px;
      border-radius: 10px;
      color: white;
      font-size: 16px;
      z-index: 9999;
    }

    select, input {
      font-family: 'IM Fell English SC', serif;
      font-size: 16px;
      margin: 5px;
    }
  </style>
</head>
<body>
  <div id="overlay">
    <img id="background" src="overlay.png" alt="Overlay background" />

    <!-- Team Names -->
    <div id="teamA" class="team">Team A</div>
    <div id="teamB" class="team">Team B</div>

    <!-- Scores -->
    <div id="scoreA" class="score">0</div>
    <div id="scoreB" class="score">0</div>
  </div>

  <!-- Control Panel -->
  <div id="controlPanel">
    <label>Team A:
      <select id="selectTeamA"></select>
      Score A: <input type="number" id="scoreInputA" value="0" />
      Font Size A: <input type="number" id="fontSizeA" value="48" />
    </label>
    <br />
    <label>Team B:
      <select id="selectTeamB"></select>
      Score B: <input type="number" id="scoreInputB" value="0" />
      Font Size B: <input type="number" id="fontSizeB" value="48" />
    </label>
    <br />
    <button onclick="updateOverlay()">Update</button>
  </div>

  <script>
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSE9zzuZk-G-NTbxyXn9EkrMyUVoDexXP2Hu3vpuMsQPrLhxF_MxqSw-oNhC2BMs__dINFP3RR6f4sF/pub?output=csv';
    let teamData = [];

    fetch(SHEET_URL)
      .then(res => res.text())
      .then(csv => {
        const rows = csv.split('\n');
        const header = rows.shift();
        teamData = rows.map(row => {
          const cols = row.split(',');
          return {
            name: cols[0],
            primary: cols[2],
            secondary: cols[3],
            fontSize: 48,
          };
        }).filter(t => t.name);

        const selectA = document.getElementById('selectTeamA');
        const selectB = document.getElementById('selectTeamB');
        teamData.forEach(team => {
          const optionA = new Option(team.name, team.name);
          const optionB = new Option(team.name, team.name);
          selectA.appendChild(optionA);
          selectB.appendChild(optionB);
        });
      });

    function updateOverlay() {
      const teamAName = document.getElementById('selectTeamA').value;
      const teamBName = document.getElementById('selectTeamB').value;
      const scoreA = document.getElementById('scoreInputA').value;
      const scoreB = document.getElementById('scoreInputB').value;
      const fontSizeA = document.getElementById('fontSizeA').value + 'px';
      const fontSizeB = document.getElementById('fontSizeB').value + 'px';

      document.getElementById('teamA').textContent = teamAName;
      document.getElementById('teamB').textContent = teamBName;
      document.getElementById('scoreA').textContent = scoreA;
      document.getElementById('scoreB').textContent = scoreB;

      document.getElementById('teamA').style.fontSize = fontSizeA;
      document.getElementById('teamB').style.fontSize = fontSizeB;

      const teamA = teamData.find(t => t.name === teamAName);
      const teamB = teamData.find(t => t.name === teamBName);

      if (teamA && teamB) {
        const overlay = document.getElementById('overlay');
        overlay.style.borderImage = `linear-gradient(to right, ${teamA.primary}, ${teamA.secondary}, ${teamB.primary}, ${teamB.secondary}) 1`;
      }
    }
  </script>
</body>
</html>
